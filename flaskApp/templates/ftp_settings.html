<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<meta name="description" content="">
	
	<meta name="author" content="">
	
	<link rel="icon" href="static/images/pes.png">
	
	<title>Linear Logger</title>

    <!-- Bootstrap core CSS -->
    <link href="static/dist/css/bootstrap.min.css" rel="stylesheet">

    <!--Fonts-->
    <link href="static/css/fonts-all.css" rel="stylesheet">
    
    <!-- Icons -->
    <link href="static/css/font-awesome.css" rel="stylesheet">
    
    <!-- Custom styles for this template -->
    <link href="static/css/style.css" rel="stylesheet">
</head>
<body>
	<div class="container-fluid" id="wrapper">
		<div class="row">
			<nav class="sidebar col-xs-12 col-sm-4 col-lg-3 col-xl-2 bg-faded sidebar-style-1">
				<h1 class="site-title"><a href="/"><em class="fa fa-television"></em> Logger</a></h1>
				
				<a href="#menu-toggle" class="btn btn-default" id="menu-toggle"><em class="fa fa-bars"></em></a>
				
				<ul class="nav nav-pills flex-column sidebar-nav">
					<li class="nav-item"><a class="nav-link" href="/welcome"><em class="fa fa-th"></em> Welcome</a></li>
					<li class="nav-item"><a class="nav-link active" href="/ftp_settings"><em class="fa fa-cog"></em> Network Setting <span class="sr-only">(current)</span></a></li>
					<li class="nav-item"><a class="nav-link" href="/modbus_settings"><em class="fa fa-cog"></em> MODBUS Settings</a></li>
					<li class="nav-item"><a class="nav-link" href="/zigbee_settings"><em class="fa fa-cog"></em> Zigbee Settings</a></li>
					<li class="nav-item"><a class="nav-link" href="/general_settings"><em class="fa fa-cog"></em> General Settings</a></li>
					<li class="nav-item"><a class="nav-link" href="/rtu_create"><em class="fa fa-file-o"></em> Rtu file settings</a></li>
					<li class="nav-item"><a class="nav-link" href="/data_files"><em class="fa fa-folder-o"></em> Data Files</a></li>
					<li class="nav-item"><a class="nav-link" href="/log"><em class="fa fa-file-text-o"></em> Log Files</a></li>
				</ul>
				
				<a href="/signout" class="logout-button"><em class="fa fa-power-off"></em> Signout</a></nav>
			
			<main class="col-xs-12 col-sm-8 offset-sm-4 col-lg-9 offset-lg-3 col-xl-10 offset-xl-2 pt-3 pl-4">
				<header class="page-header row justify-center">
					<div class="col-md-6 col-lg-8" >
						<h1 class="float-left text-center text-md-left">Network Settings</h1>
					</div>
					
					<div class="dropdown user-dropdown col-md-6 col-lg-4 text-center text-md-right"><a class="btn btn-stripped dropdown-toggle" href="https://example.com" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<img src="static/images/pes.png" alt="profile photo" class="circle float-left profile-photo" width="40" height="auto">
						
						<div class="username mt-1">
							<h4 class="mb-1">{{active_user}}</h4>
						</div>
						</a>
						
						<div class="dropdown-menu dropdown-menu-right" style="margin-right: 1.5;" aria-labelledby="dropdownMenuLink">
						     <a class="dropdown-item" href="/signout"><em class="fa fa-power-off mr-1"></em> Logout</a></div>
					</div>
					
					<div class="clear"></div>
				</header>
				
				<section class="row">
					<div class="col-sm-12">
						<section class="row">
							<div class="col-md-12 col-lg-8">
								<form name="ip_check" class="form-horizontal" action="/ftp_settings" method="post">
									<fieldset>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-4">
													<label class="col" for="IP">FTP hostname</label>
													<div class="col">
														<input id="ip" name="ip" type="text" placeholder="IP Address" class="form-control">
													</div>
												</div>
												<div class="col-sm-4">
													<label class="col" for="name_ftp">FTP Username</label>
													<div class="col">
														<input id="name_ftp" name="name_ftp" type="text" placeholder="username" class="form-control">
													</div>
												</div>
												<div class="col-sm-4">
													<label class="col" for="ftp_key">FTP Password</label>
													<div class="col">
														<input id="ftp_key" name="ftp_key" type="password" placeholder="password" class="form-control">
													</div>
												</div>
											</div>
										</div>


										<div class="form-group">
											<div class="row">
												<div class="col-sm-4">
													<label class="col" for="port">FTP Port</label>
													<div class="col">
														<input id="port" name="port" type="number" step="1" min="21" max="22" placeholder="Enter Port (21)" class="form-control">
													</div>
												</div>
												<div class="col-sm-4">
													<label class="col" for="path">FTP Path</label>
													<div class="col">
														<input id="path" name="path" type="text" placeholder="Enter Path" class="form-control">
													</div>
												</div>
												<div class="col-sm-4">
													<label class="col" for="interval">FTP Interval</label>
													<div class="col">
														<input id="interval" name="interval" type="number" step=".5" min="5" max="7200" placeholder="1-60" class="form-control">
													</div>
												</div>
											</div>
										</div>

										<!-- Form actions -->
										<div class="form-group">
											<div class="col-12 widget-right no-padding">
												<button id="sub" type="submit" class="btn btn-primary btn-md float-right" onclick="ValidateIPaddress(document.ip_check.ip)">Submit</button>
											</div>
										</div>
									</fieldset>
								</form>	
							</div>
						</section>
					</div>
				</section>
			</main>

			<!-- GPRS/LAN Settings -->
			<main class="col-xs-12 col-sm-8 offset-sm-4 col-lg-9 offset-lg-3 col-xl-10 offset-xl-2 pt-3 pl-4">
				<header class="page-header row justify-left">
					<div class="col-md-6 col-lg-8" >
						<h1 class="float-left text-center text-md-left">GPRS/LAN Settings</h1>
					</div>
					
					<div class="clear"></div>
				</header>
				
				<section class="row">
					<div class="col-sm-12">
						<section class="row">
							<div class="col-md-12 col-lg-8">
								<form id="nwForm" class="form-horizontal" action="/nw_select" method="post">
									<fieldset>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-4">
													<label class="col" for="nw_type">Network Type</label>
													{% if nw_type == "LAN" %}
													<div  class="btn-group" data-toggle="buttons">
													  <label class="btn btn-primary active">
													    <input type="radio" name="nw_type" id="option1" value="LAN" autocomplete="off" checked> LAN
													  </label>
													  <label class="btn btn-primary">
													    <input type="radio" name="nw_type" id="option2" value="GPRS" autocomplete="off"> GPRS
													  </label>
													</div>
													{% elif nw_type == "GPRS" %}
													<div  class="btn-group" data-toggle="buttons">
													  <label class="btn btn-primary">
													    <input type="radio" name="nw_type" id="option1" value="LAN" autocomplete="off"> LAN
													  </label>
													  <label class="btn btn-primary active">
													    <input type="radio" name="nw_type" id="option2" value="GPRS" autocomplete="off" checked> GPRS
													  </label>
													</div>
													{% else %}
													<div  class="btn-group" data-toggle="buttons">
													  <label class="btn btn-primary">
													    <input type="radio" name="nw_type" id="option1" value="LAN" autocomplete="off"> LAN
													  </label>
													  <label class="btn btn-primary">
													    <input type="radio" name="nw_type" id="option2" value="GPRS" autocomplete="off"> GPRS
													  </label>
													</div>
													{% endif %}
												</div>
											</div>
										</div>
									</fieldset>
								</form>	

								{% if nw_type=="LAN" %}
								<br>
								<h4 class="float-left text-center text-md-left">LAN Settings</h4>
								<br>
								<br>

								<form id="ipForm" class="form-horizontal" action="/conn_type" method="post">
									<fieldset>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-4">
													<label class="col" for="ip_type">Connection Type</label>
													{% if ip_type=="static" %}
													<div  class="btn-group" data-toggle="buttons">
													  <label class="btn btn-primary">
													    <input type="radio" name="ip_type" id="option1" value="dhcp" autocomplete="off"> DHCP
													  </label>
													  <label class="btn btn-primary active">
													    <input type="radio" name="ip_type" id="option2" value="static" autocomplete="off" checked> STATIC
													  </label>
													</div>
													
													{% else %}
													<div  class="btn-group" data-toggle="buttons">
													  <label class="btn btn-primary active">
													    <input type="radio" name="ip_type" id="option1" value="dhcp" autocomplete="off" checked> DHCP
													  </label>
													  <label class="btn btn-primary">
													    <input type="radio" name="ip_type" id="option2" value="static" autocomplete="off"> STATIC
													  </label>
													</div>

													{% endif %}
												</div>
											</div>
										</div>
									</fieldset>
								</form>

								<form name="lan_ip" class="form-horizontal" action="/lan_settings" method="post">
									<fieldset>
										{% if ip_type=="static" %}
										<div class="form-group">
											<div class="row">
												<div class="col-sm-3">
													<label class="col" for="IP">IP address</label>
													<div class="col">
														<input id="ip" name="ip" type="text" placeholder="address" class="form-control">
													</div>
												</div>
												<div class="col-sm-3">
													<label class="col" for="subnet">Subnet Mask</label>
													<div class="col">
														<input id="subnet" name="subnet" type="text" placeholder="Subnet" class="form-control">
													</div>
												</div>
												<div class="col-sm-3">
													<label class="col" for="gateway">Gateway</label>
													<div class="col">
														<input id="gateway" name="gateway" type="text" placeholder="gateway" class="form-control">
													</div>
												</div>
												<div class="col-sm-3">
													<label class="col" for="">DNS server</label>
													<div class="col">
														<input id="dns" name="dns" type="text" placeholder="DNS" class="form-control">
													</div>
												</div>
											</div>
										</div>
										{% endif %}

										<!-- Form actions -->
										<div class="form-group">
											<div class="col-12 widget-right no-padding">
												<button id="sub" type="submit" class="btn btn-primary btn-md float-right" onclick="ValidateIPaddress(document.lan_ip.ip)">Submit</button>
											</div>
										</div>

									</fieldset>
								</form>
								{% endif %}

								{% if nw_type=="GPRS" %}
								<br>
								<h4 class="float-left text-center text-md-left">GPRS Settings</h4>
								<br>
								<br>
								<form class="form-horizontal" action="/gprs_settings" method="post">
									<fieldset>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-3">
													<label class="col" for="APN_name">APN Name</label>
													<div class="col">
														<input id="APN_name" name="APN_name" type="text" placeholder="Name" class="form-control">
													</div>
												</div>
												<div class="col-sm-3">
													<label class="col" for="APN_num">APN Number</label>
													<div class="col">
														<input id="APN_num" name="APN_num" type="text" placeholder="Number" class="form-control">
													</div>
												</div>
												<div class="col-sm-3">
													<label class="col" for="user">Username</label>
													<div class="col">
														<input id="user" name="gprs_user" type="text" placeholder="Username" class="form-control">
													</div>
												</div>
												<div class="col-sm-3">
													<label class="col" for="pass">Password</label>
													<div class="col">
														<input id="pass" name="pass" type="text" placeholder="Password" class="form-control">
													</div>
												</div>
											</div>
										</div>


										<!-- Form actions -->
										<div class="form-group">
											<div class="col-12 widget-right no-padding">
												<button id="sub" type="submit" class="btn btn-primary btn-md float-right">Submit</button>
											</div>
										</div>

									</fieldset>
								</form>
								{% endif %}


							</div>
						</section>
					</div>
				</section>
			</main>



		</div>
	</div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="static/js/jquery-3.2.1.min.js"></script>
    <script src="static/dist/js/bootstrap.min.js"></script>
    
    <script src="static/js/tether.min.js"></script>
    <script>
    	$('input[name=nw_type]').change(function(){
		    document.getElementById("nwForm").submit();
		});
    	// document.getElementById("myForm").submit();
    </script>

     <script>
    	$('input[name=ip_type]').change(function(){
		    document.getElementById("ipForm").submit();
		});
    </script>

    <script>
	  function ValidateIPaddress(inputText)  
	  {  
	    var ipformat = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/; 
	     ipformat = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/; 
	   if(inputText.value.match(ipformat))  
	 {  
	   return true;
	 }  
	 else  
	 {  
	 alert("You have entered an invalid IP address!");  
	           
	 }  
	  }  
	</script>


	  </body>
</html>
